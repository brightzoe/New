TODO: js 开发规范 文档注释标准 jsdoc
https://jsdoc.app/index.html

## 在中英文混排，或者有符号的时候是否要加空格？

间距要有，但不一定是空格。
部分软件能自动呈现间距，那就不必加空格。
绝大多数软件不能自动呈现间距，那就需要手动加空格。

- 中文与西文混排时，不一定要有空格字符，但一定要有间距。-from zhihu 梁海
- 在未来应该是一个排版问题，可以用程序把 plain text 生成符合条件的文档。
- 在现阶段并没有一个统一的标准，只有个人习惯，基于提升可读性，还是需要手动加空格。
- 加空格违反了内容与样式分离的原则，中英文间距属于样式的范畴，但空格是内容，是可被读取为字符的。
  是简单的在不支持混排的环境中改善排版的方式，但一旦遇到支持的环境就弄巧成拙了。
  加空格倒是很容易，不过再删除可就麻烦了，在网页上编辑好的一篇文章，加好了空格，看着很美观，但是复制粘贴到 Word 这样的软件中，中西文之间的距离就更大了，这个时候再想删除这些空格就费力气了。
- 英文标点符号都要加空格。
  事实上我喜欢加空格并不主要是因为好看问题——因为英文单词是用空格定界的，那我的理解就是，一个英文单词要和同一行里面之前和之后的单词（或者类似概念的东西）隔开，就需要有一个空格，不论这些内容是用何种文字书写。
- 不使用空格，还有个重要原因，因为空白空格在不同浏览器之下的解析效果不一致。
  有些宽，有些窄，尤其一些精确的版式处理时会比较麻烦。需要空格的地方全部使用 CSS 的 margin 定义解决，绝对的精确，所以我会尽量不使用空格。
  实际产品中，工程师嵌入程序经常都会有空格导入，最近正在实践用 CSS 语句定义 word-spacing:-3px; 来缩减不必要的空格效果。-zhihu 千鸟

## Gatsby

### 使用 react-baidu-map 包。

调用 https://uiwjs.github.io/react-baidu-map
问题：
调用 BMap 对象时，BMap is not defined。
build 时，显示 window/document is not defined.
思路：
gatsby 是服务端渲染组件，在 node 环境读不到 window/document，无法挂载对象。
只在浏览器环境中使用的组件需要特殊处理,见文档。(https://www.gatsbyjs.com/docs/using-client-side-only-packages)

方法：

- <del>修改了引用的 react-baidu-map 包，判断 window/document 是否存在然后再加载可以解决这个问题，确信思路是对的，但不能复用。
- <del>react-helmet,在头部引用 baidu map api,未解决问题。
- React.lazy 配合 suspense 异步加载组件，判断已经有了 window 再加载，suspense 需要一个占位符或加载动画做 fallback。解决上述两个问题。
- 上面 Gatsby 文档中提出可以使用 loadable-components 组件解决，暂未实验。

BUG:仍然存在的问题:
在延迟加载的 map 中仍然读不到 BMap 对象，在浏览器中读取相关对象和属性正常。






